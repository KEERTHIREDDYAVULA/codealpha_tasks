<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
            display: flex;
            flex-direction: column; /* Changed to column to stack title and calculator */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
        }

        .calculator {
            background-color: #334155;
            padding: 15px; /* Reduced padding */
            border-radius: 1rem;
            box-shadow: 0 8px 12px -3px rgba(0, 0, 0, 0.1),
                        0 3px 5px -2px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 300px; /* Smaller width */
            display: flex;
            flex-direction: column;
            gap: 12px;
            transform: scale(0.95);
        }

        .calculator-display {
            width: 100%;
            background-color: #1e293b;
            color: #f8fafc;
            font-size: 2rem; /* Smaller display font */
            text-align: right;
            padding: 12px 18px;
            border-radius: 0.5rem;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            overflow-x: auto;
            white-space: nowrap;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .calculator-button {
            background-color: #475569;
            color: #f8fafc;
            padding: 14px; /* Smaller buttons */
            font-size: 1.2rem;
            border: none;
            border-radius: 0.6rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.1),
                        0 2px 3px -1px rgba(0, 0, 0, 0.06);
        }

        .calculator-button:hover {
            background-color: #64748b;
            transform: translateY(-1px);
        }

        .calculator-button:active {
            background-color: #334155;
            transform: translateY(0);
            box-shadow: inset 0 2px 3px rgba(0, 0, 0, 0.2);
        }

        .calculator-button.operator {
            background-color: #f97316;
        }

        .calculator-button.operator:hover {
            background-color: #ea580c;
        }

        .calculator-button.clear {
            background-color: #ef4444;
        }

        .calculator-button.clear:hover {
            background-color: #dc2626;
        }

        .calculator-button.equals {
            background-color: #22c55e;
            grid-column: span 2;
        }

        .calculator-button.equals:hover {
            background-color: #16a34a;
        }

        @media (max-width: 480px) {
            .calculator {
                max-width: 90%;
                transform: scale(0.9);
            }
            .calculator-display {
                font-size: 1.6rem;
            }
            .calculator-button {
                padding: 12px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Visible Title -->
    <h1 class="text-slate-700 text-3xl font-bold mb-4 text-center">Simple Calculator</h1>
    <div class="calculator">
        <div class="calculator-display" id="display">0</div>
        <div class="calculator-buttons">
            <button class="calculator-button clear" data-value="C" style="grid-column: span 2;">C</button>
            <button class="calculator-button" data-value="backspace">&#9003;</button>
            <button class="calculator-button operator" data-value="/">&divide;</button>
            <button class="calculator-button" data-value="7">7</button>
            <button class="calculator-button" data-value="8">8</button>
            <button class="calculator-button" data-value="9">9</button>
            <button class="calculator-button operator" data-value="*">&times;</button>
            <button class="calculator-button" data-value="4">4</button>
            <button class="calculator-button" data-value="5">5</button>
            <button class="calculator-button" data-value="6">6</button>
            <button class="calculator-button operator" data-value="-">&minus;</button>
            <button class="calculator-button" data-value="1">1</button>
            <button class="calculator-button" data-value="2">2</button>
            <button class="calculator-button" data-value="3">3</button>
            <button class="calculator-button operator" data-value="+">&plus;</button>
            <button class="calculator-button" data-value="0">0</button>
            <button class="calculator-button" data-value=".">.</button>
            <button class="calculator-button equals" data-value="=">&equals;</button>
        </div>
    </div>

    <script>
        const display = document.getElementById('display');
        const buttons = document.querySelectorAll('.calculator-button');
        let currentInput = '0';
        let lastInputWasEquals = false;

        function updateDisplay() {
            display.textContent = currentInput;
        }

        function handleButtonClick(event) {
            const value = event.target.dataset.value;

            if (value === 'C') {
                currentInput = '0';
                lastInputWasEquals = false;
            } else if (value === 'backspace') {
                if (currentInput.length > 1 && currentInput !== 'Error') {
                    currentInput = currentInput.slice(0, -1);
                } else {
                    currentInput = '0';
                }
                lastInputWasEquals = false;
            } else if (value === '=') {
                try {
                    let expression = currentInput.replace(/ร/g, '*').replace(/รท/g, '/');
                    expression = expression.replace(/([+\-*/.]{2,})/g, (match) => match[match.length - 1]);
                    let result = eval(expression);
                    if (result % 1 !== 0) result = parseFloat(result.toFixed(10));
                    currentInput = result.toString();
                    lastInputWasEquals = true;
                } catch {
                    currentInput = 'Error';
                    lastInputWasEquals = true;
                }
            } else if (['+', '-', '*', '/'].includes(value)) {
                lastInputWasEquals = false;
                const lastChar = currentInput.slice(-1);
                if (['+', '-', '*', '/', '.'].includes(lastChar)) {
                    currentInput = currentInput.slice(0, -1) + value;
                } else {
                    currentInput += value;
                }
            } else if (value === '.') {
                lastInputWasEquals = false;
                const lastNumber = currentInput.split(/[\+\-\*\/]/).pop();
                if (!lastNumber.includes('.')) currentInput += value;
            } else {
                if (currentInput === '0' || lastInputWasEquals) {
                    currentInput = value;
                    lastInputWasEquals = false;
                } else {
                    currentInput += value;
                }
            }
            updateDisplay();
        }

        buttons.forEach(button => button.addEventListener('click', handleButtonClick));

        document.addEventListener('keydown', (event) => {
            const key = event.key;
            let mappedValue = '';
            if (/[0-9]/.test(key)) mappedValue = key;
            else if (['+', '-', '*', '/'].includes(key)) mappedValue = key;
            else if (key === '.') mappedValue = '.';
            else if (key === 'Enter') mappedValue = '=';
            else if (key === 'Escape' || key.toLowerCase() === 'c') mappedValue = 'C';
            else if (key === 'Backspace') {
                if (currentInput.length > 1 && currentInput !== 'Error') currentInput = currentInput.slice(0, -1);
                else currentInput = '0';
                updateDisplay();
                return;
            }

            if (mappedValue) {
                const syntheticEvent = { target: { dataset: { value: mappedValue } } };
                handleButtonClick(syntheticEvent);
            }
        });

        updateDisplay();
    </script>
</body>
</html>
